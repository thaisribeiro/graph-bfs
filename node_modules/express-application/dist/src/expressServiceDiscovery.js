'use strict';Object.defineProperty(exports, "__esModule", { value: true });var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);var _createClass2 = require('babel-runtime/helpers/createClass');var _createClass3 = _interopRequireDefault(_createClass2);var _fs = require('fs');var _fs2 = _interopRequireDefault(_fs);
var _path = require('path');function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}

/**
                                                                                                                           * @class ServiceDiscovery
                                                                                                                           * @ignore
                                                                                                                           */var
ExpressServiceDiscovery = function () {
  /**
                                        * @param {Object} router - Express Router
                                        */
  function ExpressServiceDiscovery(router) {(0, _classCallCheck3.default)(this, ExpressServiceDiscovery);
    this.router = router;
  }

  /**
     * @param {Array} paths - Array of paths to load services from
     */(0, _createClass3.default)(ExpressServiceDiscovery, [{ key: 'discovery', value: function discovery(
    paths) {var _this = this;
      if (!Array.isArray(paths)) {
        paths = [paths];
      }

      paths.forEach(function (routePath) {
        var modulePath = (0, _path.resolve)(routePath);
        var files = _fs2.default.readdirSync(routePath);

        if (files.length === 0) {
          return;
        }

        files.forEach(function (file) {
          var module = require(modulePath + '/' + file.replace('.js', ''));

          if (module.hasOwnProperty('default')) {
            new module.default(_this.router);
          }
        });
      });
    } }]);return ExpressServiceDiscovery;}();exports.default = ExpressServiceDiscovery;