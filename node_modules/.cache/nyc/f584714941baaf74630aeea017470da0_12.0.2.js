'use strict';var cov_2790xyptoa=function(){var path="/home/thais/Documentos/graph-bfs/src/handlers/joiValidate.js",hash="f4be95d6c39112addf8289fb7d81d5255af124fc",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/thais/Documentos/graph-bfs/src/handlers/joiValidate.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:75}},"1":{start:{line:1,column:94},end:{line:1,column:130}},"2":{start:{line:1,column:151},end:{line:1,column:187}},"3":{start:{line:1,column:213},end:{line:1,column:262}},"4":{start:{line:1,column:288},end:{line:1,column:330}},"5":{start:{line:1,column:331},end:{line:7,column:12}},"6":{start:{line:7,column:23},end:{line:7,column:37}},"7":{start:{line:7,column:50},end:{line:7,column:78}},"8":{start:{line:7,column:95},end:{line:7,column:124}},"9":{start:{line:7,column:142},end:{line:7,column:175}},"10":{start:{line:7,column:189},end:{line:7,column:205}},"11":{start:{line:7,column:244},end:{line:7,column:298}},"12":{start:{line:7,column:349},end:{line:43,column:203}},"13":{start:{line:7,column:373},end:{line:43,column:122}},"14":{start:{line:28,column:73},end:{line:43,column:119}},"15":{start:{line:28,column:136},end:{line:43,column:101}},"16":{start:{line:28,column:147},end:{line:43,column:100}},"17":{start:{line:29,column:14},end:{line:29,column:26}},"18":{start:{line:30,column:14},end:{line:30,column:106}},"19":{start:{line:30,column:106},end:{line:30,column:124}},"20":{start:{line:30,column:124},end:{line:36,column:20}},"21":{start:{line:33,column:37},end:{line:33,column:61}},"22":{start:{line:34,column:38},end:{line:34,column:73}},"23":{start:{line:35,column:18},end:{line:35,column:117}},"24":{start:{line:35,column:40},end:{line:35,column:117}},"25":{start:{line:36,column:27},end:{line:38,column:62}},"26":{start:{line:38,column:37},end:{line:38,column:55}},"27":{start:{line:38,column:55},end:{line:38,column:61}},"28":{start:{line:38,column:62},end:{line:38,column:103}},"29":{start:{line:39,column:14},end:{line:41,column:17}},"30":{start:{line:40,column:16},end:{line:40,column:40}},"31":{start:{line:43,column:14},end:{line:43,column:58}},"32":{start:{line:43,column:76},end:{line:43,column:99}},"33":{start:{line:43,column:123},end:{line:43,column:200}},"34":{start:{line:43,column:163},end:{line:43,column:198}},"35":{start:{line:43,column:225},end:{line:43,column:419}},"36":{start:{line:43,column:440},end:{line:43,column:442}},"37":{start:{line:43,column:460},end:{line:43,column:610}},"38":{start:{line:46,column:2},end:{line:46,column:18}},"39":{start:{line:50,column:2},end:{line:50,column:34}},"40":{start:{line:50,column:27},end:{line:50,column:34}},"41":{start:{line:52,column:19},end:{line:55,column:23}},"42":{start:{line:58,column:2},end:{line:81,column:5}},"43":{start:{line:59,column:4},end:{line:59,column:85}},"44":{start:{line:59,column:48},end:{line:59,column:85}},"45":{start:{line:61,column:4},end:{line:79,column:7}},"46":{start:{line:62,column:24},end:{line:69,column:8}},"47":{start:{line:63,column:8},end:{line:67,column:9}},"48":{start:{line:64,column:10},end:{line:64,column:44}},"49":{start:{line:65,column:10},end:{line:65,column:38}},"50":{start:{line:66,column:10},end:{line:66,column:22}},"51":{start:{line:68,column:8},end:{line:68,column:15}},"52":{start:{line:71,column:6},end:{line:78,column:7}},"53":{start:{line:72,column:8},end:{line:76,column:33}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:7,column:215},end:{line:7,column:237}},loc:{start:{line:7,column:243},end:{line:7,column:299}},line:7},"1":{name:"joiValidate",decl:{start:{line:7,column:308},end:{line:7,column:319}},loc:{start:{line:7,column:333},end:{line:47,column:1}},line:7},"2":{name:"(anonymous_2)",decl:{start:{line:7,column:349},end:{line:7,column:350}},loc:{start:{line:7,column:361},end:{line:43,column:201}},line:7},"3":{name:"_callee",decl:{start:{line:28,column:13},end:{line:28,column:20}},loc:{start:{line:28,column:37},end:{line:43,column:120}},line:28},"4":{name:"_callee$",decl:{start:{line:28,column:116},end:{line:28,column:124}},loc:{start:{line:28,column:135},end:{line:43,column:102}},line:28},"5":{name:"(anonymous_5)",decl:{start:{line:32,column:48},end:{line:32,column:49}},loc:{start:{line:32,column:63},end:{line:36,column:17}},line:32},"6":{name:"(anonymous_6)",decl:{start:{line:39,column:41},end:{line:39,column:42}},loc:{start:{line:39,column:64},end:{line:41,column:15}},line:39},"7":{name:"validate",decl:{start:{line:43,column:139},end:{line:43,column:147}},loc:{start:{line:43,column:162},end:{line:43,column:199}},line:43},"8":{name:"valida",decl:{start:{line:49,column:9},end:{line:49,column:15}},loc:{start:{line:49,column:74},end:{line:83,column:1}},line:49},"9":{name:"(anonymous_9)",decl:{start:{line:58,column:54},end:{line:58,column:55}},loc:{start:{line:58,column:79},end:{line:81,column:3}},line:58},"10":{name:"(anonymous_10)",decl:{start:{line:61,column:27},end:{line:61,column:28}},loc:{start:{line:61,column:44},end:{line:79,column:5}},line:61},"11":{name:"(anonymous_11)",decl:{start:{line:62,column:36},end:{line:62,column:37}},loc:{start:{line:62,column:52},end:{line:69,column:7}},line:62}},branchMap:{"0":{loc:{start:{line:7,column:251},end:{line:7,column:297}},type:"cond-expr",locations:[{start:{line:7,column:275},end:{line:7,column:278}},{start:{line:7,column:281},end:{line:7,column:297}}],line:7},"1":{loc:{start:{line:7,column:251},end:{line:7,column:272}},type:"binary-expr",locations:[{start:{line:7,column:251},end:{line:7,column:254}},{start:{line:7,column:258},end:{line:7,column:272}}],line:7},"2":{loc:{start:{line:28,column:147},end:{line:43,column:100}},type:"switch",locations:[{start:{line:28,column:187},end:{line:36,column:20}},{start:{line:36,column:20},end:{line:38,column:103}},{start:{line:38,column:103},end:{line:43,column:58}},{start:{line:43,column:58},end:{line:43,column:65}},{start:{line:43,column:65},end:{line:43,column:99}}],line:28},"3":{loc:{start:{line:34,column:38},end:{line:34,column:73}},type:"cond-expr",locations:[{start:{line:34,column:63},end:{line:34,column:66}},{start:{line:34,column:69},end:{line:34,column:73}}],line:34},"4":{loc:{start:{line:35,column:18},end:{line:35,column:117}},type:"if",locations:[{start:{line:35,column:18},end:{line:35,column:117}},{start:{line:35,column:18},end:{line:35,column:117}}],line:35},"5":{loc:{start:{line:36,column:27},end:{line:38,column:62}},type:"if",locations:[{start:{line:36,column:27},end:{line:38,column:62}},{start:{line:36,column:27},end:{line:38,column:62}}],line:36},"6":{loc:{start:{line:50,column:2},end:{line:50,column:34}},type:"if",locations:[{start:{line:50,column:2},end:{line:50,column:34}},{start:{line:50,column:2},end:{line:50,column:34}}],line:50},"7":{loc:{start:{line:50,column:6},end:{line:50,column:25}},type:"binary-expr",locations:[{start:{line:50,column:6},end:{line:50,column:14}},{start:{line:50,column:18},end:{line:50,column:25}}],line:50},"8":{loc:{start:{line:53,column:13},end:{line:53,column:31}},type:"binary-expr",locations:[{start:{line:53,column:13},end:{line:53,column:20}},{start:{line:53,column:24},end:{line:53,column:31}}],line:53},"9":{loc:{start:{line:59,column:4},end:{line:59,column:85}},type:"if",locations:[{start:{line:59,column:4},end:{line:59,column:85}},{start:{line:59,column:4},end:{line:59,column:85}}],line:59},"10":{loc:{start:{line:59,column:8},end:{line:59,column:46}},type:"binary-expr",locations:[{start:{line:59,column:8},end:{line:59,column:15}},{start:{line:59,column:19},end:{line:59,column:46}}],line:59},"11":{loc:{start:{line:63,column:8},end:{line:67,column:9}},type:"if",locations:[{start:{line:63,column:8},end:{line:67,column:9}},{start:{line:63,column:8},end:{line:67,column:9}}],line:63},"12":{loc:{start:{line:63,column:12},end:{line:63,column:75}},type:"binary-expr",locations:[{start:{line:63,column:12},end:{line:63,column:16}},{start:{line:63,column:20},end:{line:63,column:45}},{start:{line:63,column:49},end:{line:63,column:75}}],line:63},"13":{loc:{start:{line:71,column:6},end:{line:78,column:7}},type:"if",locations:[{start:{line:71,column:6},end:{line:78,column:7}},{start:{line:71,column:6},end:{line:78,column:7}}],line:71}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{"0":[0,0],"1":[0,0],"2":[0,0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0],"13":[0,0]},_coverageSchema:"d34fc3e6b8297bcde183f5492bcb8fcb36775295"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_2790xyptoa.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _regenerator=(cov_2790xyptoa.s[1]++,require('babel-runtime/regenerator'));var _regenerator2=(cov_2790xyptoa.s[2]++,_interopRequireDefault(_regenerator));var _asyncToGenerator2=(cov_2790xyptoa.s[3]++,require('babel-runtime/helpers/asyncToGenerator'));var _asyncToGenerator3=(cov_2790xyptoa.s[4]++,_interopRequireDefault(_asyncToGenerator2));cov_2790xyptoa.s[5]++;exports.default=joiValidate;var _joi=(cov_2790xyptoa.s[6]++,require('joi'));var _joi2=(cov_2790xyptoa.s[7]++,_interopRequireDefault(_joi));var _JoiError=(cov_2790xyptoa.s[8]++,require('../errors/JoiError'));var _JoiError2=(cov_2790xyptoa.s[9]++,_interopRequireDefault(_JoiError));var _ramda=(cov_2790xyptoa.s[10]++,require('ramda'));function _interopRequireDefault(obj){cov_2790xyptoa.f[0]++;cov_2790xyptoa.s[11]++;return(cov_2790xyptoa.b[1][0]++,obj)&&(cov_2790xyptoa.b[1][1]++,obj.__esModule)?(cov_2790xyptoa.b[0][0]++,obj):(cov_2790xyptoa.b[0][1]++,{default:obj});}function joiValidate(validations){cov_2790xyptoa.f[1]++;var validate=(cov_2790xyptoa.s[12]++,function(){cov_2790xyptoa.f[2]++;var _ref=(cov_2790xyptoa.s[13]++,(0,_asyncToGenerator3.default)(/*#__PURE__*/_regenerator2.default.mark(function _callee(req,res,next){cov_2790xyptoa.f[3]++;var errors,options,message_error;cov_2790xyptoa.s[14]++;return _regenerator2.default.wrap(function _callee$(_context){cov_2790xyptoa.f[4]++;cov_2790xyptoa.s[15]++;while(1){cov_2790xyptoa.s[16]++;switch(_context.prev=_context.next){case 0:cov_2790xyptoa.b[2][0]++;cov_2790xyptoa.s[17]++;errors=[];cov_2790xyptoa.s[18]++;options=(0,_ramda.mergeDeepLeft)({},validations.options,globalOptions,defaultOptions);cov_2790xyptoa.s[19]++;_context.next=4;cov_2790xyptoa.s[20]++;return Object.keys(unknownMap).forEach(function(key){cov_2790xyptoa.f[5]++;var allowUnknown=(cov_2790xyptoa.s[21]++,options[unknownMap[key]]);var entireContext=(cov_2790xyptoa.s[22]++,options.contextRequest?(cov_2790xyptoa.b[3][0]++,req):(cov_2790xyptoa.b[3][1]++,null));cov_2790xyptoa.s[23]++;if(validations[key]){cov_2790xyptoa.b[4][0]++;cov_2790xyptoa.s[24]++;valida(errors,req[key],validations[key],key,allowUnknown,entireContext);}else{cov_2790xyptoa.b[4][1]++;}});case 4:cov_2790xyptoa.b[2][1]++;cov_2790xyptoa.s[25]++;if(!(errors.length===0)){cov_2790xyptoa.b[5][0]++;cov_2790xyptoa.s[26]++;_context.next=6;cov_2790xyptoa.s[27]++;break;}else{cov_2790xyptoa.b[5][1]++;}cov_2790xyptoa.s[28]++;return _context.abrupt('return',next());case 6:cov_2790xyptoa.b[2][2]++;cov_2790xyptoa.s[29]++;message_error=errors.map(function(item,value){cov_2790xyptoa.f[6]++;cov_2790xyptoa.s[30]++;return item.messages[0];});cov_2790xyptoa.s[31]++;next(new _JoiError2.default(message_error));case 8:cov_2790xyptoa.b[2][3]++;case'end':cov_2790xyptoa.b[2][4]++;cov_2790xyptoa.s[32]++;return _context.stop();}}},_callee,this);})));cov_2790xyptoa.s[33]++;return function validate(_x,_x2,_x3){cov_2790xyptoa.f[7]++;cov_2790xyptoa.s[34]++;return _ref.apply(this,arguments);};}());var defaultOptions=(cov_2790xyptoa.s[35]++,{contextRequest:false,allowUnknownHeaders:true,allowUnknownBody:true,allowUnknownQuery:true,allowUnknownParams:true,allowUnknownCookies:true,status:400,statusText:'Bad Request'});var globalOptions=(cov_2790xyptoa.s[36]++,{});var unknownMap=(cov_2790xyptoa.s[37]++,{headers:'allowUnknownHeaders',body:'allowUnknownBody',query:'allowUnknownQuery',params:'allowUnknownParams',cookies:'allowUnknownCookies'});cov_2790xyptoa.s[38]++;return validate;}function valida(errObj,request,schema,location,allowUnknown,context){cov_2790xyptoa.f[8]++;cov_2790xyptoa.s[39]++;if((cov_2790xyptoa.b[7][0]++,!request)||(cov_2790xyptoa.b[7][1]++,!schema)){cov_2790xyptoa.b[6][0]++;cov_2790xyptoa.s[40]++;return;}else{cov_2790xyptoa.b[6][1]++;}var joiOptions=(cov_2790xyptoa.s[41]++,{context:(cov_2790xyptoa.b[8][0]++,context)||(cov_2790xyptoa.b[8][1]++,request),allowUnknown:allowUnknown,abortEarly:false});cov_2790xyptoa.s[42]++;_joi2.default.validate(request,schema,joiOptions,function(errors,value){cov_2790xyptoa.f[9]++;cov_2790xyptoa.s[43]++;if((cov_2790xyptoa.b[10][0]++,!errors)||(cov_2790xyptoa.b[10][1]++,errors.details.length===0)){cov_2790xyptoa.b[9][0]++;cov_2790xyptoa.s[44]++;return Object.assign(request,value);}else{cov_2790xyptoa.b[9][1]++;}cov_2790xyptoa.s[45]++;errors.details.forEach(function(error){cov_2790xyptoa.f[10]++;var errorExists=(cov_2790xyptoa.s[46]++,errObj.find(function(item){cov_2790xyptoa.f[11]++;cov_2790xyptoa.s[47]++;if((cov_2790xyptoa.b[12][0]++,item)&&(cov_2790xyptoa.b[12][1]++,item.field===error.path)&&(cov_2790xyptoa.b[12][2]++,item.location===location)){cov_2790xyptoa.b[11][0]++;cov_2790xyptoa.s[48]++;item.messages.push(error.message);cov_2790xyptoa.s[49]++;item.types.push(error.type);cov_2790xyptoa.s[50]++;return item;}else{cov_2790xyptoa.b[11][1]++;}cov_2790xyptoa.s[51]++;return;}));cov_2790xyptoa.s[52]++;if(!errorExists){cov_2790xyptoa.b[13][0]++;cov_2790xyptoa.s[53]++;errObj.push({field:error.path,location:location,messages:[error.message],types:[error.type]});}else{cov_2790xyptoa.b[13][1]++;}});});}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpvaVZhbGlkYXRlLmpzIl0sIm5hbWVzIjpbImpvaVZhbGlkYXRlIiwidmFsaWRhdGlvbnMiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZXJyb3JzIiwib3B0aW9ucyIsImdsb2JhbE9wdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsIk9iamVjdCIsImtleXMiLCJ1bmtub3duTWFwIiwiZm9yRWFjaCIsImtleSIsImFsbG93VW5rbm93biIsImVudGlyZUNvbnRleHQiLCJjb250ZXh0UmVxdWVzdCIsInZhbGlkYSIsImxlbmd0aCIsIm1lc3NhZ2VfZXJyb3IiLCJtYXAiLCJpdGVtIiwidmFsdWUiLCJtZXNzYWdlcyIsIkpvaUVycm9yIiwidmFsaWRhdGUiLCJhbGxvd1Vua25vd25IZWFkZXJzIiwiYWxsb3dVbmtub3duQm9keSIsImFsbG93VW5rbm93blF1ZXJ5IiwiYWxsb3dVbmtub3duUGFyYW1zIiwiYWxsb3dVbmtub3duQ29va2llcyIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJoZWFkZXJzIiwiYm9keSIsInF1ZXJ5IiwicGFyYW1zIiwiY29va2llcyIsImVyck9iaiIsInJlcXVlc3QiLCJzY2hlbWEiLCJsb2NhdGlvbiIsImNvbnRleHQiLCJqb2lPcHRpb25zIiwiYWJvcnRFYXJseSIsIkpvaSIsImRldGFpbHMiLCJhc3NpZ24iLCJlcnJvckV4aXN0cyIsImZpbmQiLCJmaWVsZCIsImVycm9yIiwicGF0aCIsInB1c2giLCJtZXNzYWdlIiwidHlwZXMiLCJ0eXBlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFNd0JBLFcsQ0FOeEIsMEIseUNBQ0EsOEMsbURBQ0EsOEIsNkZBSWUsU0FBU0EsV0FBVCxDQUFxQkMsV0FBckIsRUFBa0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFCL0MscUJBQXdCQyxHQUF4QixFQUE2QkMsR0FBN0IsRUFBa0NDLElBQWxDO0FBQ1FDLG9CQURSLEdBQ2lCLEVBRGpCO0FBRVFDLHFCQUZSLEdBRWtCLDBCQUFjLEVBQWQsRUFBa0JMLFlBQVlL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O0FBR1ZsQixvQkFBVSxDQUFDNEIsTUFBTUcsT0FBUCxDQUhBO0FBSVZDLGlCQUFPLENBQUNKLE1BQU1LLElBQVAsQ0FKRyxFQUFaOztBQU1EO0FBQ0YsS0FsQkQ7O0FBb0JELEdBdkJEOztBQXlCRCIsImZpbGUiOiJqb2lWYWxpZGF0ZS5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS90aGFpcy9Eb2N1bWVudG9zL2dyYXBoLWJmcy9zcmMvaGFuZGxlcnMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSm9pIGZyb20gJ2pvaSdcbmltcG9ydCBKb2lFcnJvciBmcm9tICcuLi9lcnJvcnMvSm9pRXJyb3InXG5pbXBvcnQge1xuICBtZXJnZURlZXBMZWZ0XG59IGZyb20gJ3JhbWRhJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBqb2lWYWxpZGF0ZSh2YWxpZGF0aW9ucykge1xuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBjb250ZXh0UmVxdWVzdDogZmFsc2UsXG4gICAgYWxsb3dVbmtub3duSGVhZGVyczogdHJ1ZSxcbiAgICBhbGxvd1Vua25vd25Cb2R5OiB0cnVlLFxuICAgIGFsbG93VW5rbm93blF1ZXJ5OiB0cnVlLFxuICAgIGFsbG93VW5rbm93blBhcmFtczogdHJ1ZSxcbiAgICBhbGxvd1Vua25vd25Db29raWVzOiB0cnVlLFxuICAgIHN0YXR1czogNDAwLFxuICAgIHN0YXR1c1RleHQ6ICdCYWQgUmVxdWVzdCdcbiAgfVxuICBjb25zdCBnbG9iYWxPcHRpb25zID0ge31cblxuICBjb25zdCB1bmtub3duTWFwID0ge1xuICAgIGhlYWRlcnM6ICdhbGxvd1Vua25vd25IZWFkZXJzJyxcbiAgICBib2R5OiAnYWxsb3dVbmtub3duQm9keScsXG4gICAgcXVlcnk6ICdhbGxvd1Vua25vd25RdWVyeScsXG4gICAgcGFyYW1zOiAnYWxsb3dVbmtub3duUGFyYW1zJyxcbiAgICBjb29raWVzOiAnYWxsb3dVbmtub3duQ29va2llcydcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgY29uc3QgZXJyb3JzID0gW11cbiAgICBjb25zdCBvcHRpb25zID0gbWVyZ2VEZWVwTGVmdCh7fSwgdmFsaWRhdGlvbnMub3B0aW9ucywgZ2xvYmFsT3B0aW9ucywgZGVmYXVsdE9wdGlvbnMpXG5cbiAgICBhd2FpdCBPYmplY3Qua2V5cyh1bmtub3duTWFwKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGNvbnN0IGFsbG93VW5rbm93biA9IG9wdGlvbnNbdW5rbm93bk1hcFtrZXldXVxuICAgICAgY29uc3QgZW50aXJlQ29udGV4dCA9IG9wdGlvbnMuY29udGV4dFJlcXVlc3QgPyByZXEgOiBudWxsXG4gICAgICBpZiAodmFsaWRhdGlvbnNba2V5XSkgdmFsaWRhKGVycm9ycywgcmVxW2tleV0sIHZhbGlkYXRpb25zW2tleV0sIGtleSwgYWxsb3dVbmtub3duLCBlbnRpcmVDb250ZXh0KVxuICAgIH0pXG5cbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG5leHQoKVxuICAgIGNvbnN0IG1lc3NhZ2VfZXJyb3IgPSBlcnJvcnMubWFwKChpdGVtLCB2YWx1ZSkgPT4ge1xuICAgICAgcmV0dXJuIGl0ZW0ubWVzc2FnZXNbMF1cbiAgICB9KVxuXG4gICAgbmV4dChuZXcgSm9pRXJyb3IobWVzc2FnZV9lcnJvcikpXG4gIH1cblxuICByZXR1cm4gdmFsaWRhdGVcbn1cblxuZnVuY3Rpb24gdmFsaWRhKGVyck9iaiwgcmVxdWVzdCwgc2NoZW1hLCBsb2NhdGlvbiwgYWxsb3dVbmtub3duLCBjb250ZXh0KSB7XG4gIGlmICghcmVxdWVzdCB8fCAhc2NoZW1hKSByZXR1cm5cblxuICBjb25zdCBqb2lPcHRpb25zID0ge1xuICAgIGNvbnRleHQ6IGNvbnRleHQgfHwgcmVxdWVzdCxcbiAgICBhbGxvd1Vua25vd246IGFsbG93VW5rbm93bixcbiAgICBhYm9ydEVhcmx5OiBmYWxzZVxuICB9XG5cbiAgSm9pLnZhbGlkYXRlKHJlcXVlc3QsIHNjaGVtYSwgam9pT3B0aW9ucywgZnVuY3Rpb24gKGVycm9ycywgdmFsdWUpIHtcbiAgICBpZiAoIWVycm9ycyB8fCBlcnJvcnMuZGV0YWlscy5sZW5ndGggPT09IDApIHJldHVybiBPYmplY3QuYXNzaWduKHJlcXVlc3QsIHZhbHVlKVxuXG4gICAgZXJyb3JzLmRldGFpbHMuZm9yRWFjaChlcnJvciA9PiB7XG4gICAgICBjb25zdCBlcnJvckV4aXN0cyA9IGVyck9iai5maW5kKChpdGVtKSA9PiB7XG4gICAgICAgIGlmIChpdGVtICYmIGl0ZW0uZmllbGQgPT09IGVycm9yLnBhdGggJiYgaXRlbS5sb2NhdGlvbiA9PT0gbG9jYXRpb24pIHtcbiAgICAgICAgICBpdGVtLm1lc3NhZ2VzLnB1c2goZXJyb3IubWVzc2FnZSlcbiAgICAgICAgICBpdGVtLnR5cGVzLnB1c2goZXJyb3IudHlwZSlcbiAgICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfSlcblxuICAgICAgaWYgKCFlcnJvckV4aXN0cykge1xuICAgICAgICBlcnJPYmoucHVzaCh7XG4gICAgICAgICAgZmllbGQ6IGVycm9yLnBhdGgsXG4gICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgIG1lc3NhZ2VzOiBbZXJyb3IubWVzc2FnZV0sXG4gICAgICAgICAgdHlwZXM6IFtlcnJvci50eXBlXVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG5cbiAgfSlcblxufVxuIl19